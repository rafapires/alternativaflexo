/*
 ### jQuery Star Rating Plugin v4.11 - 2013-03-14 ###
 * Home: http://www.fyneworks.com/jquery/star-rating/
 * Code: http://code.google.com/p/jquery-star-rating-plugin/
 *
 * Licensed under http://en.wikipedia.org/wiki/MIT_License
 ###
*/
window.jQuery&&function(a){if(!a.support.opacity&&!a.support.style)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(p){}a.fn.rating=function(b){if(0===this.length)return this;if("string"==typeof arguments[0]){if(1<this.length){var e=arguments;return this.each(function(){a.fn.rating.apply(a(this),e)})}a.fn.rating[arguments[0]].apply(this,a.makeArray(arguments).slice(1)||[]);return this}var d=a.extend({},a.fn.rating.options,b||{});a.fn.rating.calls++;this.not(".star-rating-applied").addClass("star-rating-applied").each(function(){var c,
b=a(this),e=(this.name||d.name||"unnamed-rating"+(d.stars?"-"+a.fn.rating.calls:"")).replace(/\[|\]/g,"_").replace(/^\_+|\_+$/g,""),k=a(this.form||document.body);if(!b.is("input")){if(d.stars)return b.html(Array(d.stars+1).join('<input type="radio" name="'+e+'"/>')),b.find("input").each(function(b){a(this).val(d.values?d.values[b]:b+1)}).rating(d);throw"Invalid star rating plugin call";}var h=k.data("rating");h&&h.call==a.fn.rating.calls||(h={count:0,call:a.fn.rating.calls});var g=h[e]||k.data("rating"+
e);g&&(c=g.data("rating"));if(g&&c)c.count++;else{c=a.extend({},d||{},(a.metadata?b.metadata():a.meta?b.data():null)||{},{count:0,stars:[],inputs:[]});c.serial=h.count++;g=a('<span class="star-rating-control"/>');b.before(g);g.addClass("rating-to-be-drawn");if(b.attr("disabled")||b.hasClass("disabled"))c.readOnly=!0;b.hasClass("required")&&(c.required=!0);g.append(c.cancel=a('<div class="rating-cancel rater-cancel-'+c.serial+'"><a title="'+c.cancel+'">'+c.cancelValue+"</a></div>").on("mouseover",
function(){a(this).rating("drain");a(this).addClass("star-rating-hover")}).on("mouseout",function(){a(this).rating("draw");a(this).removeClass("star-rating-hover")}).on("click",function(){a(this).rating("select")}).data("rating",c))}var f=a('<div role="text" aria-label="'+(this.title||this.value)+'" class="star-rating rater-'+c.serial+'"><a title="'+(this.title||this.value)+'">'+this.value+"</a></div>");g.append(f);this.id&&f.attr("id",this.id);this.className&&f.addClass(this.className);for(datum in a(this).data())f.data(datum,
a(this).data(datum));c.half&&(c.split=2);if("number"==typeof c.split&&0<c.split){var l=(a.fn.width?f.width():0)||c.starWidth,n=c.count%c.split,l=Math.floor(l/c.split);f.width(l).find("a").css({"margin-left":"-"+n*l+"px"})}if(c.readOnly)f.addClass("star-rating-readonly");else f.addClass("star-rating-live").on("mouseover",function(){a(this).rating("fill");a(this).rating("focus")}).on("mouseout",function(){a(this).rating("draw");a(this).rating("blur")}).on("click",function(){a(this).rating("select")});
this.checked&&(c.current=f);"A"==this.nodeName&&a(this).hasClass("selected")&&(c.current=f);b.hide();b.on("change.rating",function(b){if(b.selfTriggered)return!1;a(this).rating("select")});f.data("rating.input",b.data("rating.star",f));c.stars[c.stars.length]=f[0];c.inputs[c.inputs.length]=b[0];c.rater=h[e]=g;c.context=k;b.data("rating",c);g.data("rating",c);f.data("rating",c);k.data("rating",h);k.data("rating"+e,g)});a(".rating-to-be-drawn").rating("draw").removeClass("rating-to-be-drawn");return this};
a.extend(a.fn.rating,{calls:0,focus:function(){var b=this.data("rating");if(!b||!b.focus)return this;var e=a(this).data("rating.input")||a("INPUT"==this.tagName?this:null);b.focus&&b.focus.apply(e[0],[e.val(),a("a",e.data("rating.star"))[0]])},blur:function(){var b=this.data("rating");if(!b||!b.blur)return this;var e=a(this).data("rating.input")||a("INPUT"==this.tagName?this:null);b.blur&&b.blur.apply(e[0],[e.val(),a("a",e.data("rating.star"))[0]])},fill:function(){var a=this.data("rating");if(!a)return this;
a.readOnly||(this.rating("drain"),this.prevAll().addBack().filter(".rater-"+a.serial).addClass("star-rating-hover"))},drain:function(){var a=this.data("rating");if(!a)return this;a.readOnly||a.rater.children().filter(".rater-"+a.serial).removeClass("star-rating-on").removeClass("star-rating-hover")},draw:function(){var b=this.data("rating");if(!b)return this;this.rating("drain");var e=a(b.current);(e=e.length?e.prevAll().addBack().filter(".rater-"+b.serial):null)&&e.addClass("star-rating-on");b.cancel[b.readOnly||
b.required?"hide":"show"]();this.siblings()[b.readOnly?"addClass":"removeClass"]("star-rating-readonly")},select:function(b,e){var d=this.data("rating");if(!d)return this;if(!d.readOnly){d.current=null;if("undefined"!=typeof b||1<this.length){if("number"==typeof b)return a(d.stars[b]).rating("select",void 0,e);if("string"==typeof b)return a.each(d.stars,function(){a(this).data("rating.input").val()==b&&a(this).rating("select",void 0,e)}),this}else d.current="INPUT"==this[0].tagName?this.data("rating.star"):
this.is(".rater-"+d.serial)||this.is(".rater-cancel-"+d.serial)?this:null;this.data("rating",d);this.rating("draw");var c=a(d.current?d.current.data("rating.input"):null),m=a(d.inputs).filter(":checked");a(d.inputs).not(c).prop("checked",!1);c.prop("checked",!0);a(c.length?c:m).off("change.rating");a(c.length?c:m).change();(e||void 0===e)&&d.callback&&d.callback.apply(c[0],[c.val(),a("a",d.current)[0]]);return this}},readOnly:function(b,e){var d=this.data("rating");if(!d)return this;d.readOnly=b||
void 0===b?!0:!1;e?a(d.inputs).attr("disabled","disabled"):a(d.inputs).removeAttr("disabled");this.data("rating",d);this.rating("draw")},disable:function(){this.rating("readOnly",!0,!0)},enable:function(){this.rating("readOnly",!1,!1)}});a.fn.rating.options={cancel:"Cancel Rating",cancelValue:"",split:0,starWidth:16};a(function(){a("input[type=radio].star").rating()})}(jQuery);